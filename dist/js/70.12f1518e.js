"use strict";(self["webpackChunkwork_project"]=self["webpackChunkwork_project"]||[]).push([[70],{6070:function(s,i,t){t.r(i),t.d(i,{default:function(){return C}});var e=t(6252),a=t(9963),r=t(3577);const o=s=>((0,e.dD)("data-v-2097a352"),s=s(),(0,e.Cn)(),s),l=o((()=>(0,e._)("label",{for:"first-name"},"Имя",-1))),n=o((()=>(0,e._)("label",{for:"last-name"},"Фамилия",-1))),d=o((()=>(0,e._)("label",{for:"email"},"Email",-1))),p=["disabled"],m=o((()=>(0,e._)("label",{for:"password"},"Пароль",-1))),u=["disabled"],w=o((()=>(0,e._)("label",{for:"confirm-password"},"Повторите пароль",-1))),c={class:"resultString"},h={key:0},g={key:3,class:"spinner-border",style:{"margin-bottom":"10px"},role:"status"},f=o((()=>(0,e._)("span",{class:"sr-only"},null,-1))),_=[f],v=["disabled"],b={class:"signup-link"},y=o((()=>(0,e._)("a",{href:"../php/sendmail.php"},"Поехали!",-1)));function k(s,i,t,o,f,k){const L=(0,e.up)("router-link");return(0,e.wg)(),(0,e.iD)(e.HY,null,[(0,e._)("form",{class:"login-form",onSubmit:i[9]||(i[9]=(0,a.iM)((s=>k.login()),["prevent"]))},[(0,e._)("h2",null,(0,r.zw)(f.isLoginMode?"Авторизация":"Регистрация"),1),f.isLoginMode?(0,e.kq)("",!0):((0,e.wg)(),(0,e.iD)("div",{key:0,class:(0,r.C_)(["form-group",{active_label_style:f.firstName}])},[l,(0,e.wy)((0,e._)("input",{"onUpdate:modelValue":i[0]||(i[0]=s=>f.firstName=s),type:"text",class:"form-control",id:"first-name",name:"first-name",required:""},null,512),[[a.nr,f.firstName]])],2)),f.isLoginMode?(0,e.kq)("",!0):((0,e.wg)(),(0,e.iD)("div",{key:1,class:(0,r.C_)(["form-group",{active_label_style:f.lastName}])},[n,(0,e.wy)((0,e._)("input",{"onUpdate:modelValue":i[1]||(i[1]=s=>f.lastName=s),type:"text",class:"form-control",id:"last-name",name:"last-name",required:""},null,512),[[a.nr,f.lastName]])],2)),(0,e._)("div",{class:(0,r.C_)(["form-group",{active_label_style:f.email}])},[d,(0,e.wy)((0,e._)("input",{"onUpdate:modelValue":i[2]||(i[2]=s=>f.email=s),type:"email",placeholder:" ",class:"form-control",id:"email",name:"email",disabled:f.isRequest,required:""},null,8,p),[[a.nr,f.email]])],2),(0,e._)("div",{class:(0,r.C_)(["form-group pass",{active_label_style:f.password}]),ref:"validation_result"},[m,(0,e.wy)((0,e._)("input",{onKeyup:i[3]||(i[3]=s=>k.validate()),"onUpdate:modelValue":i[4]||(i[4]=s=>f.password=s),type:"password",class:"form-control",ref:"password",id:"password",name:"password",disabled:f.isRequest,required:""},null,40,u),[[a.nr,f.password]]),(0,e._)("div",{ref:"password_control",onClick:i[5]||(i[5]=s=>k.viewPassword()),class:"password-control"},null,512),(0,e._)("p",null,(0,r.zw)(f.passwordTips),1)],2),f.isLoginMode?(0,e.kq)("",!0):((0,e.wg)(),(0,e.iD)("div",{key:2,class:(0,r.C_)(["form-group",{active_label_style:f.password_confirmation}])},[w,(0,e.wy)((0,e._)("input",{"onUpdate:modelValue":i[6]||(i[6]=s=>f.password_confirmation=s),type:"password",class:"form-control",ref:"password_confirm",id:"confirm-password",name:"confirm-password",required:""},null,512),[[a.nr,f.password_confirmation]])],2)),(0,e._)("div",c,[f.isActiveResultString?((0,e.wg)(),(0,e.iD)("p",h,(0,r.zw)(f.resultString),1)):(0,e.kq)("",!0)]),f.loading?((0,e.wg)(),(0,e.iD)("div",g,_)):(0,e.kq)("",!0),(0,e._)("button",{type:"submit",class:"main_button login_button",disabled:f.isRequest},(0,r.zw)(f.isLoginMode?"Войти":"Зарегистрироваться"),9,v),f.sendEmailAgain?((0,e.wg)(),(0,e.iD)("button",{key:4,onClick:i[7]||(i[7]=s=>k.sendEmailConfirmLink()),class:"main_button login_button",style:{"margin-top":"5px"}}," Отправить ссылку на подтверждение повторно ")):(0,e.kq)("",!0),f.isLoginMode?((0,e.wg)(),(0,e.j4)(L,{key:5,class:"forgot-password",to:"/forgotPassword",exact:""},{default:(0,e.w5)((()=>[(0,e.Uk)("Забыли пароль?")])),_:1})):(0,e.kq)("",!0),(0,e._)("div",b,[(0,e.Uk)((0,r.zw)(f.isLoginMode?"Нет аккаунта?":"Уже есть аккаунт?")+" ",1),(0,e._)("a",{class:"",onClick:i[8]||(i[8]=s=>k.changeMode()),exact:""},(0,r.zw)(f.isLoginMode?"Зарегистрируйтесь":"Войти"),1)])],32),y],64)}var L=t(576),q={data(){return{isLoginMode:!0,firstName:"",lastName:"",email:"",password:"",password_confirmation:"",resultString:"",isActiveResultString:!0,viewInput:!0,sendEmailAgain:!1,loading:!1,isRequest:!1,isValidPassword:!1,passwordTips:""}},methods:{changeMode(){this.isLoginMode=!this.isLoginMode,this.passwordTips="",this.resultString="",this.email="",this.password="",this.firstName="",this.lastName="",this.password_confirmation=""},login(){if(this.isLoginMode){if(this.resultString="",this.loading=!0,this.isRequest=!0,""===this.email||""===this.password)return this.loading=!1,this.isRequest=!1,this.resultString="Заполните все поля",void(this.isActive=!0);L.Z.dispatch("loginUser",{email:this.email,password:this.password}).then((()=>{this.isRequest=!1,this.resultString=L.Z.getters.getLoginResultMessage,this.loading=!1,"not confirmed"===L.Z.getters.getLoginStatus&&(this.sendEmailAgain=!0,this.viewInput=!1),L.Z.dispatch("getUserByEmailAction")}))}else{if(!this.isValidPassword)return;this.loading=!0,L.Z.dispatch("registerUser",{firstName:this.firstName,lastName:this.lastName,email:this.email,password:this.password,password_confirmation:this.password_confirmation}).then((()=>{this.loading=!1,this.isActive=!0,this.resultString=L.Z.getters.getRegResultString})).catch((()=>{console.log("Ошибка")}))}},sendEmailConfirmLink(){L.Z.dispatch("sendEmailConfirmLink",{email:this.email}).then((()=>{this.resultString=L.Z.getters.getLoginResultMessage}))},validate(){if(!this.isLoginMode){if(this.$refs.validation_result.classList.remove("valid_pass"),this.isValidPassword=!1,0===this.password.length)return void(this.passwordTips="");let s=/^.{8,}$/;if(!s.test(this.password))return void(this.passwordTips="Пароль меньше 8 символов");let i=/^(?=.*?[A-Z]).{8,}$/;if(!i.test(this.password))return void(this.passwordTips="Пароль не содержит заглавных букв");let t=/^(?=.*?[a-z]).{8,}$/;if(!t.test(this.password))return void(this.passwordTips="Пароль не содержит строчных букв");let e=/^(?=.*?[0-9]).{8,}$/;if(!e.test(this.password))return void(this.passwordTips="Пароль не содержит цифр");this.$refs.validation_result.classList.add("valid_pass"),this.passwordTips="Пароль надежный",this.isValidPassword=!0}},viewPassword(){"password"==this.$refs.password.getAttribute("type")?(this.$refs.password_control.classList.add("view"),this.$refs.password.setAttribute("type","text"),this.$refs.password_confirm.setAttribute("type","text")):(this.$refs.password_control.classList.remove("view"),this.$refs.password.setAttribute("type","password"),this.$refs.password_confirm.setAttribute("type","password"))}}},M=t(3744);const A=(0,M.Z)(q,[["render",k],["__scopeId","data-v-2097a352"]]);var C=A}}]);
//# sourceMappingURL=70.12f1518e.js.map